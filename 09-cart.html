<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Exo d'Algo - Cart !</title>
    <link href="./bootstrap.min.css" rel="stylesheet" />
    <link href="./style.css" rel="stylesheet" />
</head>
<body>
<a href="index.html">← revenir à la liste des exos</a>
<div class="card">
    <p class="h6 font-weight-bold text-center">#09 - Panier</p>
    <div class="instructions">
        <p class="text-secondary">Votre mission si toutefois vous l'acceptez, est de vérifier la concordance des mots de passes :</p>
        <br />
        <p class="text-secondary">Vous devez retourner la valeur de votre panier</p>
        <p class="text-secondary">Si je sélectionne <i class="text-dark">Une formation sur javascript (30€)</i> avec le bon code de promotion, j'obtiendrai :</p>
        <p class="text-success">"La valeur de votre panier est de 27€"</p>
    </div>

    <select name="article" id="articles">
        <option value="">--Sélectionner un article--</option>
        <option value="one">Une formation sur javascript (30€)</option>
        <option value="two">Deux formations sur javascript (50€)</option>
    </select>

    <label>Code de réduction (10% de réduction)</label>
    <br/>
    <input type="text" id="promotion" />
    <br/>
    <button type="button" class="btn btn-primary" onclick="cartValue()">
        Connaître la valeur de mon panier
    </button>
</div>

<script type="text/javascript">
    const VALID_PROMOTION_CODE = "10POUR100";

    function cartValue() {
        //Ici on récupére l'article selectionné dans la liste déroulante
        let articles = document.getElementById("articles");
        let selectedArticle = articles.options[articles.selectedIndex].value;

        //Ici on récupére la valeur entrée dans le champ du code promo
        let promotion = document.getElementById("promotion");
        let promotionValue = promotion.value;

        console.log("selectedArticle : "+ selectedArticle); 
        console.log("promotionValue : "+ promotionValue);

        // Les messages à afficher
        let messageError = "Veuillez selectionner une formation";
        let messageFormation30AvecPromo = "La valeur de votre panier est de 27€";
        let messageFormation30SansPromo = "La valeur de votre panier est de 30€";
        let messageFormation50AvecPromo = "La valeur de votre panier est de 45€";
        let messageFormation50SansPromo = "La valeur de votre panier est de 50€";

        /*  Premiére méthode : Avec des conditions IF imbriquées
        //Premier niveau de condition IF en fonction de l'article selectionné
        if (selectedArticle == "one")
        {
            //second niveau de condition if en fonction de la valeur du champ promotion
            if (promotionValue == VALID_PROMOTION_CODE)
            {
                alert(messageFormation30AvecPromo);
            }
            else
            {
                alert(messageFormation30SansPromo);
            }
        }
        else if (selectedArticle == "two")
        {
            //second niveau de condition if en fonction de la valeur du champ promotion
            if (promotionValue == VALID_PROMOTION_CODE)
            {
                alert(messageFormation50AvecPromo);
            }
            else
            {
                alert(messageFormation50SansPromo);
            }

        }
        else
        {
            alert(messageError);
        }
        */

        //Seconde méthode : Avec des conditions compléte

        if(selectedArticle == "one" && promotionValue == VALID_PROMOTION_CODE)
        {
            alert(messageFormation30AvecPromo);
        }   
        else if (selectedArticle == "one")
        {
            alert(messageFormation30SansPromo);
        }
        else if (selectedArticle == "two" && promotionValue == VALID_PROMOTION_CODE)
        {
            alert(messageFormation50AvecPromo);
        }
        else if (selectedArticle == "two")
        {
            alert(messageFormation50SansPromo);
        }
        else
        {
            alert(messageError);
        }
        
    }
</script>
</body>
</html>